---
title: "Hakim Node Specification: The Healer Starseed"
description: "Technical specification for the Hakim node, the 'regenerative system' of the kOS ecosystem."
type: "implementation"
status: "proposal"
priority: "critical"
last_updated: "2024-07-23"
version: "2.0.0"
agent_notes: "Major refactor to align with canonical architecture principles. Pivoted from a specific wellness app to a generic system health and repair framework. Added all standard sections."
---

# Hakim Node Specification: The Healer Starseed

## 🎯 Overview: The Regenerative System

The Hakim node is a **Service Tier starseed** in the kOS ecosystem. Inspired by the cultural archetype of the Islamic wise healer, its function is to **maintain the holistic health and operational integrity of the digital ecosystem**.

Functionally, it acts as the **regenerative and homeostatic system** for a kOS federation. It provides a generic framework for:
-   **Monitoring:** Observing the vital signs of other nodes (e.g., latency, resource usage, error rates).
-   **Diagnosis:** Analyzing telemetry to identify anomalies, diagnose root causes, and predict future failures.
-   **Repair:** Triggering automated or user-guided actions to restore a node to a healthy state.

The Hakim node embodies the principle of "holistic healing" by understanding that the health of one node can impact the entire federation, and its goal is to ensure the long-term, resilient flourishing of the whole system.

## 🏛️ HIEROS Covenant Compliance

### Cultural Attribution Framework
-   **Tradition**: Islamic Hakim (حكيم) - wise healer and physician.
-   **Cultural Context**: Hakims in Islamic tradition, like Ibn Sina, were masters of holistic diagnosis. They understood that a symptom in one part of the body could be caused by an imbalance elsewhere. They treated the whole patient, not just the symptom.
-   **Attribution**: Respectfully inspired by the Hakim tradition of **holistic diagnosis and treating the root cause, not just the symptom.** This philosophy guides the node's function to analyze the entire system's health, rather than just isolated errors.

### Seven HIEROS Intentions - Node Cooperation Framework

1.  **Honor All Beings**: Performs health checks and repairs with minimal disruption and respects the operational autonomy of target nodes.
2.  **Interoperability Over Control**: Uses open standards for health monitoring, allowing any node type to be monitored and define custom repair actions.
3.  **Equity of Voice**: Provides transparent diagnostic reports that can be reviewed and validated by other nodes.
4.  **Respect Data Flow**: Collects only necessary telemetry for health monitoring without inspecting private node data.
5.  **Openness With Boundaries**: Provides transparent health reports while respecting node permission boundaries for repair actions.
6.  **Stewardship Not Extraction**: Focuses on ecosystem health improvement rather than data extraction or resource claiming.
7.  **Guided Evolution**: Enables ecosystem evolution through diagnostic insights and resilience improvements.

## 🏗️ System Architecture

### Core Component Hierarchy
```
🩺 HAKIM NODE ARCHITECTURE
├── 📡 Telemetry Collector
│   ├── Prometheus Scraper
│   ├── KLF Health Endpoint Poller
│   └── Log Aggregator (e.g., Vector)
├── 🧠 Diagnostic Engine
│   ├── Anomaly Detection Module
│   ├── Root Cause Analysis (RCA) Engine
│   └── Predictive Failure Module
├── 🛠️ Repair Orchestrator
│   ├── Action Registry (e.g., 'restart_service', 'clear_cache')
│   ├── Job Runner
│   └── Permission Manager (for sensitive repairs)
├── 📈 State Management
│   ├── Time-Series Database (for metrics)
│   ├── Health Report Store
│   └── Repair Job Queue
├── 🛡️ HIEROS Compliance Engine
│   └── Consent Validator (for repair actions)
└── 🌐 Network & Integration
    ├── KLF Framework Implementation
    └── REST API Gateway
```

## 4. Data Models

### 4.1. HealthReport
A report generated by the Diagnostic Engine.

```json
{
  "report_id": "string (uuid)",
  "target_node_did": "string (did:kos:...)",
  "status": "healthy | degraded | unhealthy | unknown",
  "summary": "string",
  "findings": [
    {
      "metric": "cpu_usage_percent",
      "value": 95.4,
      "severity": "critical",
      "message": "CPU usage has exceeded 90% for 5 minutes."
    }
  ],
  "recommended_actions": ["restart_service"],
  "timestamp": "string (iso_8601_timestamp)"
}
```

### 4.2. RepairJob
A job for the Repair Orchestrator.

```json
{
  "job_id": "string (uuid)",
  "target_node_did": "string (did:kos:...)",
  "action": "string (e.g., 'restart_service')",
  "parameters": {},
  "status": "pending | running | completed | failed",
  "logs": ["string"],
  "created_at": "string (iso_8601_timestamp)"
}
```

## 5. API Specification

### Health Monitoring & Diagnosis API

#### `POST /monitor`
-   **Summary**: Registers a node to be monitored by the Hakim.
-   **Request Body**: `{ "target_node_did": "did:kos:...", "metrics_endpoint": "http://..." }`
-   **Response**: `202 Accepted`.

#### `GET /diagnose/{target_node_did}`
-   **Summary**: Retrieves the latest `HealthReport` for a specific node.
-   **Response**: `200 OK` with the `HealthReport` object.

### Repair API

#### `POST /repair`
-   **Summary**: Creates and runs a `RepairJob`.
-   **Request Body**: `{ "target_node_did": "...", "action": "restart_service" }`
-   **Response**: `202 Accepted` with the `RepairJob` object.

#### `GET /repair/jobs/{job_id}`
-   **Summary**: Gets the status of a `RepairJob`.
-   **Response**: `200 OK` with the `RepairJob` object.

---

**Implementation Status**: 🏛️ **PROPOSAL**  
**HIEROS Compliance**: ✅ **FULLY INTEGRATED**  
**Cultural Attribution**: ✅ **PROPERLY ACKNOWLEDGED**  
**Ready For**: Development 